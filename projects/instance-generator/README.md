JSON based process client
=========================

A client library that enables interacting with the JBoss BPM Suite business-central application via rest.

Instance Generator will connect to a BPMS server and generate and  progress a configurable number of instances, as long as the input parameters for the process and the out parameters of the tasks are simple types: no coding, just a JSON configuration file.

I wanted to learns the REST apis, and have something that you can use without having an IDE or maven and git! it does not use ANY JBPMS library, so it is also an example to show how you can put together something language independent to interact with BPMS.

-- Andrea Ubbiali


Instructions
------------

you specify in the JSON file, the BPMS server, user, password

  "url":    "http://localhost:8080/business-central/",
  "username":  "erics",
  "password":  "bpmsuite1!",
  "max_task_delay": 10000,
  "n_instances": 10,

where n_instances is the number of instances to generate (i.e. number of parallel threads that will be started, each will simulate a user going through a process instance, picking the next task in the task list, executing the next human task... each task will wait for a random value of msec specifies by max_task_delay: that will give some variability for BAM. the instance generator will do retries, in case the BPMS server does not respond on time

the definition of the process start is:

   "process": {

            "project":"org.specialtripsagency:specialtripsagencyproject:2.0.0",
            "name":"org.specialtripsagency.specialtripsagencyprocess",
            "params":[
              {"name":"applicantName",    "value":"${customers}"     },
              {"name":"emailAddress",     "value":"myemail@email.com"},
              {"name":"numberOfTravelers",    "value":"${travellers}"    },
              {"name":"otherDetails",    "value":"NO"           },
              {"name":"fromDestination",    "value":"London"       },
              {"name":"toDestination",    "value":"Edinburgh"       }
            ]


the vale of the  ${ } variables  will be randomly  generated  based on the vars definition:

for example a variable price that will have a value between 2400 and 7000

        {
          "name": "price",
          "type": "int",
          "value": { "min":2400,
                 "max":7000}
                },

or, a variable customer, which value is generated by extracting randomly from a list:

        {
          "name": "customers",
          "type": "choice",
          "value": ["Kiara Z. Hanson",
                        "Jordan X. May",
                            "Castor Lewis",
                        "Ainsley B. Griffin",
                        "Yael W. Dotson",
                        "Cyrus Burke",
                        "Martina L. Palmer",
                        "Lareina Castro",
                        "Leroy F. Blanchard",
                        "Jared Middleton",
                        "Kirby Hayden",
                            "Rinah Anthony",
                        "Aquila E. Howell",
                            "Jennifer Ortiz",
                            "Macaulay H. Morrison",
                           "Shellie Merrill",
                            "Jarrod Estrada",
                            "Ursula Hines",
                            "Armando P. Ruiz",
                            "Kirestin W. Head",
                            "Pamela D. Hammond",
                            "Dawn M. Kane"]
        }

once the process is started each thread will monitor the task list to check if there are human tasks to be claimed and executed.
What to do when excuting the task is specified in the "tasks" section of the JSON

for example
if the task is "Employee Booking", it will claim, start, and complete the task via REST passing the the variables defined in "vars",  or literals:

        {
             "name":"Employee  Booking",
             "outParams":[
              {"name":"reviewRequiredOut",            "value":"${review}"     },
              {"name":"reviewRequiredDetailsOut",     "value":"Provide Discount"    },
              {"name":"bookingConfirmedOut",        "value":"${confirmed}"    },
              {"name":"bookingCancelledOut",        "value":"${canceled}",     },
              {"name":"creditCardNumberOut",        "value":"${creditcard}" },
              {"name":"expiryDateOut",              "value":"12/19"},
              {"name":"nameOfCardHolderOut",        "value":"${customers}"}
             ]

        }


Example use of tool
-------------------
The project can be built from projects/instance-generator. This produces a jar in the target directory which you can run
for example from the root of the instance-generator.

     $ cd projects/instance-generator

     $ mvn package

Now with the JBoss BPM Suite Travel Agency demo installed, start the server, build&deploy the project and run the following 
to kick off a set of process instances:

     $ java -jar target/instance-generator-1.0-jar-with-dependencies.jar bpmsClient.json


Full JSON configuration file
----------------------------------------------------------------------------------------------------------
     {
       "url":    "http://localhost:8080/business-central/",
       "username":  "erics",
       "password":  "bpmsuite1!",
       "max_task_delay": 10000,
       "n_instances": 10,

       "vars": [
        {
          "name": "price",
          "type": "int",
          "value": { "min":2400,
                 "max":7000}
                },
        {
          "name": "travellers",
          "type": "choice",
                  "value": ["1i","1i","2i","2i","2i","3i","4i"]
        },
        {
          "name": "review",
          "type": "choice",
          "value": ["False","False","True"]
        },
        {
          "name": "canceled",
          "type": "choice",
          "value": ["False","False","False","True"]
        },
        {
          "name": "confirmed",
          "type": "choice",
          "value": ["False","False","False","True"]
        },
        {"name": "creditcard",
             "type": "choice",
         "value": ["1234000011112222*","4444000011112222*","3333000011112222*","5555000011112222*"]
        },
        {
          "name": "customers",
          "type": "choice",
          "value": ["Kiara Z. Hanson",
                        "Jordan X. May",
                            "Castor Lewis",
                        "Ainsley B. Griffin",
                        "Yael W. Dotson",
                        "Cyrus Burke",
                        "Martina L. Palmer",
                        "Lareina Castro",
                        "Leroy F. Blanchard",
                        "Jared Middleton",
                        "Kirby Hayden",
                            "Rinah Anthony",
                        "Aquila E. Howell",
                            "Jennifer Ortiz",
                            "Macaulay H. Morrison",
                           "Shellie Merrill",
                            "Jarrod Estrada",
                            "Ursula Hines",
                            "Armando P. Ruiz",
                            "Kirestin W. Head",
                            "Pamela D. Hammond",
                            "Dawn M. Kane"]
        }
        ],

        "process": {

            "project":"org.specialtripsagency:specialtripsagencyproject:2.0.0",
            "name":"org.specialtripsagency.specialtripsagencyprocess",
            "params":[
              {"name":"applicantName",    "value":"${customers}"     },
              {"name":"emailAddress",     "value":"myemail@email.com"},
              {"name":"numberOfTravelers",    "value":"${travellers}"    },
              {"name":"otherDetails",    "value":"NO"           },
              {"name":"fromDestination",    "value":"London"       },
              {"name":"toDestination",    "value":"Edinburgh"       }
            ]
        },    




        "tasks": [

             {
             "name":"Employee  Booking",
             "outParams":[
              {"name":"reviewRequiredOut",            "value":"${review}"     },
              {"name":"reviewRequiredDetailsOut",     "value":"Provide Discount"    },
              {"name":"bookingConfirmedOut",        "value":"${confirmed}"    },
              {"name":"bookingCancelledOut",        "value":"${canceled}",     },
              {"name":"creditCardNumberOut",        "value":"${creditcard}" },
              {"name":"expiryDateOut",              "value":"12/19"},
              {"name":"nameOfCardHolderOut",        "value":"${customers}"}
             ]
        },
        {
          "name":"Price Review",
          "outParams":[
              {"name":"totalPriceOut",            "value":"${price}"     },
              {"name":"reviewerCommentOut",     "value":"No Comments"   }
            ]
        }
              
        ]

     }

